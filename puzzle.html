<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오이도 랜드마크로 맞춰보는 퍼즐</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="style/reset.css">
    <link rel="stylesheet" href="style/puzzle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <div id="wrap_puzzle">
        <div id="wrap_title" style="height: 37px;">
            <h2>퍼즐</h2>
        </div>
        <span id="puzzle_title"></span>
        <div class="puzzle_back">
            <div class="puzzle_area">
                <img id="puzzle" alt="" src="assets/puzzle00.png">
            </div>
            <div class="util_area">
                <span id="count_text"></span>
                <button class="nav_button" onclick="location.href='index.html'">메인 화면</button>
            </div>
        </div>
        <div class="puzzle_count">
            <p id="count_info"></p>
        </div>
        <div class="wrap_button">
            <button>메인화면</button>
        </div>
    </div>
</body>
<script>
$(document).ready(function() {
    let check = localStorage.getItem('post');
    let saveName = localStorage.getItem('name');
    let array = JSON.parse(localStorage.getItem("array"));
    if(check === 'true'){
        if(array.includes(saveName)){   //card에서 넘어왔고 array에 진행중인 랜드마크가 이미 존재하면
            alert('이미 맞춘 퍼즐입니다!');
        }else{  //card에서 넘어왔고 array에 저장된 랜드마크가 없다면
            let count = Number(localStorage.getItem('count'))+1;
            localStorage.setItem('count', count+'');
            array.push(saveName);
            localStorage.setItem("array", JSON.stringify(array));
        }
    }else{
        console.log('index에서 바로 옴');
    }

    localStorage.removeItem('post');    //post 데이터를 지움

    if(array.length === 0 ){
        $('#puzzle').attr('src','assets/puzzle00.png');
        $('#puzzle_title').html('현재까지 <strong>'+0+'개</strong>의 퍼즐을 <br>맞추셨습니다!');
        $('#count_info').html('퍼즐을 완성해주세요!');
    }
    let count = Number(localStorage.getItem('count'));
    if(count != null){
        if(count === 1){
            $('#puzzle').attr('src','assets/puzzle01.png');
            $('#puzzle_title').html('현재까지 <strong>'+count+'개</strong>의 퍼즐을 <br>맞추셨습니다!');
            $('#count_info').html('무슨 사진일까요~?');
        }
        if(count === 2){
            $('#puzzle').attr('src','assets/puzzle02.png');
            $('#puzzle_title').html('현재까지 <strong>'+count+'개</strong>의 퍼즐을 <br>맞추셨습니다!');
            $('#count_info').html('오잉 무슨 캐릭터지?');
        }
        if(count === 3){
            $('#puzzle').attr('src','assets/puzzle03.png');
            $('#puzzle_title').html('현재까지 <strong>'+count+'개</strong>의 퍼즐을 <br>맞추셨습니다!');
            $('#count_info').html('조금만 더 힘을 내세요!!');
        }
        if(count === 4){
            $('#puzzle').attr('src','assets/puzzle04.png');
            $('#puzzle_title').html('현재까지 <strong>'+count+'개</strong>의 퍼즐을 <br>맞추셨습니다!');
            $('#count_info').html('어라? 뭔지 알 것 같아');
        }
        if(count === 5){
            $('#puzzle').attr('src','assets/puzzle05.png');
            $('#puzzle_title').html('퍼즐을 완성했습니다!');
            $('#count_info').text('축하드립니다!');
        }
        $('#count_text').html('현재 맞춘 퍼즐 개수<br>'+count+'개/5개');
    }else{
        $('#puzzle_title').text('현재 맞춘 퍼즐이 없습니다!');
    }
});
</script>
</html>